# üéµ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ

## ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ WebM!

`AudioConverter` —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –∏–∑ WebM —Ñ–æ—Ä–º–∞—Ç–∞.

---

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:

### üéµ –ê—É–¥–∏–æ —Ñ–æ—Ä–º–∞—Ç—ã:
- ‚úÖ **MP3** (.mp3) ‚Äî MPEG Audio Layer 3
- ‚úÖ **WAV** (.wav) ‚Äî Waveform Audio File Format
- ‚úÖ **M4A** (.m4a) ‚Äî MPEG-4 Audio
- ‚úÖ **AAC** (.aac) ‚Äî Advanced Audio Coding
- ‚úÖ **FLAC** (.flac) ‚Äî Free Lossless Audio Codec
- ‚úÖ **OGG** (.ogg) ‚Äî Ogg Vorbis
- ‚úÖ **OPUS** (.opus) ‚Äî Opus Interactive Audio Codec
- ‚úÖ **WebM** (.webm) ‚Äî WebM Audio (Vorbis/Opus)
- ‚úÖ **CAF** (.caf) ‚Äî Core Audio Format
- ‚úÖ **AIFF** (.aiff, .aif) ‚Äî Audio Interchange File Format

### üé¨ –í–∏–¥–µ–æ —Ñ–æ—Ä–º–∞—Ç—ã (–∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∞—É–¥–∏–æ):
- ‚úÖ **MP4** (.mp4) ‚Äî MPEG-4 Part 14
- ‚úÖ **MOV** (.mov) ‚Äî QuickTime Movie
- ‚úÖ **AVI** (.avi) ‚Äî Audio Video Interleave
- ‚úÖ **MKV** (.mkv) ‚Äî Matroska Video
- ‚úÖ **WebM** (.webm) ‚Äî WebM Video (VP8/VP9)
- ‚úÖ **M4V** (.m4v) ‚Äî iTunes Video
- ‚úÖ **3GP** (.3gp) ‚Äî 3GPP Multimedia

---

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. AVFoundation –ø–æ–¥–¥–µ—Ä–∂–∫–∞
macOS **–Ω–∞—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WebM** –Ω–∞—á–∏–Ω–∞—è —Å **macOS 11 Big Sur** –∏ –Ω–æ–≤–µ–µ —á–µ—Ä–µ–∑ AVFoundation.

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
```
WebM (–ª—é–±–æ–π –∫–æ–¥–µ–∫) ‚Üí CAF (16kHz mono Float32) ‚Üí Float[] –º–∞—Å—Å–∏–≤
```

### 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–µ–∫–æ–≤ –≤ WebM:
- **–ê—É–¥–∏–æ**: Vorbis, Opus
- **–í–∏–¥–µ–æ**: VP8, VP9 (–∞—É–¥–∏–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ 3 —ç—Ç–∞–ø–∞:

```swift
1. –ó–∞–≥—Ä—É–∑–∫–∞:
   WebM —Ñ–∞–π–ª ‚Üí AVURLAsset

2. –≠–∫—Å–ø–æ—Ä—Ç:
   AVAsset ‚Üí CAF (Core Audio Format)
   - Sample Rate: 16,000 Hz
   - Channels: 1 (mono)
   - Format: Float32 PCM

3. –ß—Ç–µ–Ω–∏–µ:
   CAF ‚Üí [Float] –º–∞—Å—Å–∏–≤ —Å—ç–º–ø–ª–æ–≤
```

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

### –ü—Ä–∏–º–µ—Ä 1: WebM –∞—É–¥–∏–æ
```swift
let webmAudioURL = URL(fileURLWithPath: "/path/to/audio.webm")
let converter = AudioConverter()
let samples = try await converter.convert(url: webmAudioURL)
// samples = [Float] –º–∞—Å—Å–∏–≤ –¥–ª—è FluidAudio SDK
```

### –ü—Ä–∏–º–µ—Ä 2: WebM –≤–∏–¥–µ–æ (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ)
```swift
let webmVideoURL = URL(fileURLWithPath: "/path/to/video.webm")
let converter = AudioConverter()
let samples = try await converter.convert(url: webmVideoURL)
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫–∞
```

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –û–°:
- **macOS 11+** –¥–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WebM
- **macOS 10.15+** –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

### 2. –ö–æ–¥–µ–∫–∏:
–ï—Å–ª–∏ WebM —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–¥–∫–∏–π –∫–æ–¥–µ–∫, AVFoundation –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–≥–æ. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É:
```
ConversionError.noAudioTrack: "–ê—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
```

### 3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Opus** –∏–ª–∏ **Vorbis** –¥–ª—è –∞—É–¥–∏–æ –≤ WebM
- –î–ª—è –≤–∏–¥–µ–æ: **VP8** –∏–ª–∏ **VP9**

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:

### –ü—Ä–æ–±–ª–µ–º–∞: "–ê—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞—É–¥–∏–æ –∏–ª–∏ –∫–æ–¥–µ–∫ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª –≤ QuickTime Player –∏–ª–∏ VLC
2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ MP4/MP3 —Å –ø–æ–º–æ—â—å—é `ffmpeg`:
   ```bash
   ffmpeg -i input.webm -c:a libopus output.webm
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞"
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:
```swift
let types = AVURLAsset.audiovisualTypes()
print("–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:", types)
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ:
```swift
let asset = AVURLAsset(url: fileURL)
let tracks = try await asset.loadTracks(withMediaType: .audio)
for track in tracks {
    let format = try await track.load(.formatDescriptions)
    print("–§–æ—Ä–º–∞—Ç:", format)
}
```

---

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ:

### `AudioConverter.swift`:
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `createAsset()` —Å –æ–ø—Ü–∏—è–º–∏ –¥–ª—è WebM
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `unsupportedFormat`

### –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- `AudioFile.swift` ‚Äî —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª—é–±—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- `ImportViewModel.swift` ‚Äî –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
1. –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å `.webm` —Ñ–∞–π–ª—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í—ã–±–∏—Ä–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ `Cmd + O`
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –Ω—É–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

**WebM –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è!** üöÄ
